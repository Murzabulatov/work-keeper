{"version":3,"sources":["redux/actions/regAndLog.js","redux/actions/actionTypes.js","components/assets/Form.js","components/RegistrationPage/index.js","components/LoginPage/LoginPage.js","components/Private/Private.js","components/SignIn/reducer.js","components/Chat/index.js","components/SignIn/index.jsx","components/Room/Room.jsx","redux/actions/orgActions.js","redux/actions/depActions.js","components/Profile/ModalOrg.js","components/OrganizationCard/index.js","components/contexts/isCreatorContext.js","components/Profile/index.js","components/Navbar/Navbar.jsx","redux/actions/mainPageActions.js","components/MainPage/index.js","components/DepartmentCard/index.js","components/OrganizationInfo/ModalDepart.js","components/OrganizationInfo/index.js","components/DepartmentInfo/ModalWorker.js","redux/actions/depActualActions.js","components/WorkerInfo/index.js","components/WorkersList/index.js","components/DepartmentInfo/index.js","App.js","redux/initialState.js","redux/reducers/usersReducer.js","redux/reducers/aboutMeReducer.js","redux/reducers/orgReducer.js","redux/reducers/depReducer.js","redux/reducers/actualDepReducer.js","redux/reducers/rootReducer.js","redux/store.js","index.js"],"names":["REGISTRATION","userData","console","log","type","payload","LOGIN","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","fontSize","submit","Form","title","isReg","classes","history","useHistory","formRef","React","useRef","useState","inputs","setInputs","message","setMessage","dispatch","useDispatch","handlerAll","target","value","name","event","a","preventDefault","fetch","process","method","headers","body","JSON","stringify","response","json","result","ok","ACTION_TASKS","email","password","push","Container","component","maxWidth","CssBaseline","className","Avatar","Typography","variant","ref","onSubmit","noValidate","TextField","fullWidth","label","id","autoComplete","onChange","autoFocus","required","style","color","Button","onClick","current","reportValidity","RegistrationPage","LoginPage","PrivateRoute","children","rest","user","useSelector","state","aboutMe","render","location","isMe","to","pathname","from","action","joined","userName","roomId","users","messages","Chat","onAddMessage","socketRef","userInfo","messageValue","setMessageValue","messagesRef","useEffect","scrollTo","length","map","index","key","textAlign","text","e","rows","trim","emit","App","surname","useReducer","reducer","obj","io","connect","axios","post","get","data","disconnect","setUsers","addMessage","on","Video","props","peer","stream","srcObject","autoPlay","Room","peers","setPeers","userVideo","peersRef","roomID","match","params","userStream","videoParams","setVideoParams","microParams","setMicroParams","navigator","mediaDevices","getUserMedia","video","audio","then","getAudioTracks","enabled","forEach","userID","userToSignal","callerID","Peer","initiator","trickle","signal","createPeer","peerID","incomingSignal","addPeer","peerObj","_id","el","find","p","destroy","filter","getTracks","stop","close","getVideoTracks","muted","prev","DEP_TO_ORG","orgID","depID","DEP_ADD_DEP","depObject","WORKER_TO_DEP","workerObj","ModalOrg","open","handleClose","input","setInput","addOrg","parse","localStorage","getItem","nameOrg","orgObject","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","OrganizationCard","createContext","Profile","orgArray","organizations","setOpen","isCreator","useContext","isCreatorContext","depsObj","departments","org","Object","keys","root","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","toolbar","justifyContent","padding","mixins","content","flexGrow","MiniDrawer","useTheme","AppBar","position","clsx","Toolbar","IconButton","aria-label","edge","Drawer","direction","Divider","List","ListItem","button","ListItemIcon","ListItemText","clear","MAIN_IS_CREATOR","MAIN_USER","MAIN_DEPARTMENTS","MAIN_ORGANIZATIONS","organization","MainPage","dep","setDep","orgName","setOrgName","setUserInfo","ACTION_MAIN_PAGE","DepartmentCard","ModalDepart","nameDepart","ACTION_DEP","ACTION_ORG","OrganizationInfo","useParams","setOrg","depArray","findOrg","goBack","ModalWorker","setAddWorker","setMesFromBack","addWorker","workerEmail","WorkerInfo","worker","setWorker","workers","department","thisWorker","WorkersList","workersArr","DepartmentInfo","setOrgID","mesFromBack","element","foundDep","Provider","exact","path","Private","initialState","userReducer","aboutMeReducer","orgReducer","depReducer","actualDepReducer","combineReducers","usersReducer","enhancer","composeWithDevTools","store","createStore","rootReducer","subscribe","setItem","getState","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.28553f0b.chunk.js","sourcesContent":["import * as ACTIONS_TYPES from './actionTypes'\n\nconst REGISTRATION = (userData) => {\n  console.log('ACTION_CREATOR_REGISTRATION', userData)\n  return {\n    type: ACTIONS_TYPES.REGISTRATION,\n    payload: {\n      ...userData\n    }\n  }\n};\n\n\n\nconst LOGIN = (userData) => {\n  return {\n    type: ACTIONS_TYPES.LOGIN,\n    payload: {\n      ...userData,\n    }\n  }\n}\n\nconst LOGOUT = () => {\n  return {\n    type: ACTIONS_TYPES.LOGOUT,\n    payload: {}\n  }\n}\n\nconst IS_ME = () => {\n  return {\n    type: ACTIONS_TYPES.IS_ME,\n    payload: {\n    }\n  }\n};\n\nconst IS_NOT_ME = () => {\n  return {\n    type: ACTIONS_TYPES.IS_NOT_ME,\n    payload: {\n    }\n  }\n};\n\n\nexport {\n  REGISTRATION,\n  LOGIN,\n  IS_ME,\n  LOGOUT,\n  IS_NOT_ME\n} \n","const REGISTRATION = 'REGISTRATION',\n  LOGIN = 'LOGIN',\n  IS_ME = 'IS_ME',\n  LOGOUT = 'LOGOUT',\n  IS_NOT_ME = 'IS_NOT_ME',\n  ORG_ADD_ORG = 'ORG_ADD_ORG',\n  ORG_KEY_IN_DEP = 'ORG_KEY_IN_DEP',\n  DEP_ADD_DEP = 'DEP_ADD_DEP',\n  DEP_TO_ORG = 'DEP_TO_ORG',\n  DEP_ARR_AT_DEP = 'DEP_ARR_AT_DEP',\n  DEP_ACTUAL = 'DEP_ACTUAL',\n  WORKER_TO_DEP = 'WORKER_TO_DEP',\n  MAIN_IS_CREATOR = 'MAIN_IS_CREATOR',\n  MAIN_USER = 'MAIN_USER',\n  MAIN_DEPARTMENTS = 'MAIN_DEPARTMENTS',\n  MAIN_ORGANIZATIONS = 'MAIN_ORGANIZATIONS';\n\n\nexport {\n  REGISTRATION,\n  LOGIN,\n  IS_ME,\n  LOGOUT,\n  IS_NOT_ME,\n  ORG_ADD_ORG,\n  DEP_ADD_DEP,\n  DEP_TO_ORG,\n  ORG_KEY_IN_DEP,\n  DEP_ARR_AT_DEP,\n  DEP_ACTUAL,\n  WORKER_TO_DEP,\n  MAIN_IS_CREATOR,\n  MAIN_USER,\n  MAIN_DEPARTMENTS,\n  MAIN_ORGANIZATIONS,\n}\n","import CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport * as ACTION_TASKS from \"../../redux/actions/regAndLog\";\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n    fontSize: 20\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nconst Form = ({ title, isReg }) => {\n  const classes = useStyles();\n  const history = useHistory()\n\n  const formRef = React.useRef();\n\n\n  const [inputs, setInputs] = useState({});\n  const [message, setMessage] = useState('');\n  const dispatch = useDispatch();\n\n  function handlerAll({ target: { value, name } }) {\n    setInputs({\n      ...inputs,\n      [name]: value\n    })\n  }\n\n  async function login(event) {\n    event.preventDefault();\n    console.log(inputs);\n    try {\n      const response = await fetch(`${process.env.REACT_APP_SERVER_URL}/user/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(inputs),\n      })\n      const result = await response.json();\n\n      //////\n      console.log('LOGIN', result);\n      //////\n\n      if (response.ok) {\n        dispatch(ACTION_TASKS.LOGIN(result));\n        dispatch(ACTION_TASKS.IS_ME());\n\n        setInputs({\n          email: '',\n          password: ''\n        });\n\n        history.push('/')\n\n      } else {\n        // console.log(result.message);\n        setMessage(result.message);\n      }\n\n\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n\n  async function registration(event) {\n    event.preventDefault();\n    try {\n      const response = await fetch(`${process.env.REACT_APP_SERVER_URL}/user/registration`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(inputs),\n      })\n      const result = await response.json();\n\n      //////\n      console.log('REGISTRATION', result);\n      //////\n\n\n      if (response.ok) {\n        dispatch(ACTION_TASKS.REGISTRATION(result));\n        dispatch(ACTION_TASKS.IS_ME());\n\n        setInputs({\n          name: '',\n          email: '',\n          password: ''\n        });\n\n        history.push('/')\n\n      } else {\n        setMessage(result.message);\n      }\n\n\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          {title}\n        </Typography>\n        <form ref={formRef} onSubmit={isReg ? registration : login} className={classes.form} noValidate>\n          {isReg &&\n            <>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                fullWidth\n                name=\"name\"\n                label=\"Имя\"\n                id=\"name\"\n                autoComplete=\"current-password\"\n                onChange={handlerAll}\n                autoFocus\n                required\n              />\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                fullWidth\n                name=\"surname\"\n                label=\"Фамилия\"\n                id=\"surname\"\n                autoComplete=\"current-password\"\n                onChange={handlerAll}\n                required\n              />\n            </>\n          }\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            fullWidth\n            id=\"email\"\n            label=\"Email\"\n            name=\"email\"\n            autoComplete=\"email\"\n            onChange={handlerAll}\n            required={true}\n            autoFocus\n          />\n\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            fullWidth\n            name=\"password\"\n            label=\"Пароль\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n            onChange={handlerAll}\n            required={true}\n          />\n\n          <span style={{ color: \"red\", fontSize: \"small\" }}>{message}</span>\n\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick={() => formRef.current.reportValidity()}\n          >\n            {title}\n          </Button>\n        </form>\n      </div>\n    </Container>\n  )\n}\n\nexport default Form\n","import React from 'react';\nimport Form from \"../assets/Form\";\n\nconst RegistrationPage = () => {\n\n\n  return (\n    <Form title={'Регистрация'} isReg={true} />\n  )\n}\n\nexport default RegistrationPage\n","import React from 'react'\nimport Form from '../assets/Form'\n\n\nfunction LoginPage() {\n\n  return (\n    <Form title={'Войти'} />\n  );\n}\n\nexport default LoginPage\n","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport { useSelector } from 'react-redux'\n\nfunction PrivateRoute({ children, ...rest }) {\n\n  const user = useSelector(state => state.aboutMe)\n\n  console.log(user)\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        user.isMe ? (\n          children\n        ) : (\n            <Redirect\n              to={{\n                pathname: \"/user/login\",\n                state: { from: location }\n              }}\n            />\n          )\n      }\n    />\n  );\n}\n\nexport default PrivateRoute\n","export default (state, action) => {\n    switch (action.type) {\n        case 'JOINED':\n            return {\n                ...state,\n                joined: true,\n                userName: action.payload.userName,\n                roomId: action.payload.roomId,\n            };\n\n        case 'SET_DATA':\n            return {\n                ...state,\n                users: action.payload.users,\n                messages: action.payload.messages,\n            };\n\n        case 'SET_USERS':\n            return {\n                ...state,\n                users: action.payload,\n            };\n\n        case 'NEW_MESSAGE':\n            return {\n                ...state,\n                messages: [...state.messages, action.payload],\n            };\n\n        default:\n            return state;\n    }\n};","import React, {useEffect} from 'react';\nimport {Button} from \"@material-ui/core\";\n\nfunction Chat({ users, messages, userName, roomId, onAddMessage, socketRef, userInfo }) {\n    const [messageValue, setMessageValue] = React.useState('');\n    const messagesRef = React.useRef(null);\n\n    const onSendMessage = () => {\n      if (messageValue.trim()) {\n        socketRef.current.emit('ROOM:NEW_MESSAGE', {\n          userName,\n          roomId,\n          text: messageValue,\n        });\n        onAddMessage({ userName, text: messageValue });\n        setMessageValue('');\n      }\n\n    };\n\n    useEffect(() => {\n        messagesRef.current.scrollTo(0, 99999);\n    }, [messages]);\n\n\n\n    return (\n        <div className=\"chat\">\n            <div className=\"chat-users\">\n                <b>Онлайн ({users.length}):</b>\n                <ul>\n                    {users.map((name, index) => (\n                        <li key={name + index}>{name}</li>\n                    ))}\n                </ul>\n            </div>\n            <div className=\"chat-messages\">\n                <div ref={messagesRef} className=\"messages\">\n                    {messages.map((message, index) => (\n                      message.userName === userInfo ?\n                        <div key={index} style={{textAlign: \"right\"}} className=\"message\">\n                        <p style={{backgroundColor: '#29648A'}}>{message.text}</p>\n                        <div>\n                          <span>{message.userName}</span>\n                        </div>\n                      </div> :\n                        <div key={index} className=\"message\">\n                          <p>{message.text}</p>\n                          <div>\n                            <span>{message.userName}</span>\n                          </div>\n                        </div>\n                    ))}\n                </div>\n                <form>\n                  <textarea\n                  value={messageValue}\n                  onChange={(e) => setMessageValue(e.target.value)}\n                  className=\"form-control\"\n                  rows=\"3\"/>\n                  <Button onClick={onSendMessage} type=\"button\" className=\"btn btn-primary\">\n                      Отправить\n                  </Button>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default Chat;\n","import React, {useEffect, useReducer, useRef} from 'react';\nimport axios from 'axios';\n\nimport './index.css'\n\nimport reducer from './reducer';\nimport Chat from '../Chat';\nimport io from \"socket.io-client\";\nimport {useSelector} from \"react-redux\";\n\n\nfunction App() {\n\n    const {name, surname} = useSelector(state => state.user)\n\n    const chat = '123'\n\n    const socketRef = useRef();\n\n    const [state, dispatch] = useReducer(reducer, {\n        joined: false,\n        roomId: null,\n        userName: null,\n        users: [],\n        messages: [],\n    });\n\n    let obj = {roomId: chat, userName: name + ' ' + surname}\n\n    useEffect(  () => {\n\n        socketRef.current = io.connect(process.env.REACT_APP_SERVER_URL);\n\n        (async () => {\n            await axios.post(`${process.env.REACT_APP_SERVER_URL}/rooms`, obj);\n\n            dispatch({\n                type: 'JOINED',\n                payload: obj,\n            });\n\n            socketRef.current.emit('ROOM:JOIN', obj);\n            const { data } = await axios.get(`${process.env.REACT_APP_SERVER_URL}/rooms/${obj.roomId}`);\n            dispatch({\n                type: 'SET_DATA',\n                payload: data,\n            });\n        })()\n\n\n        return () => {\n            socketRef.current.disconnect()\n        }\n\n    }, [])\n\n\n    const setUsers = (users) => {\n        dispatch({\n            type: 'SET_USERS',\n            payload: users,\n        });\n    };\n\n    const addMessage = (message) => {\n        dispatch({\n            type: 'NEW_MESSAGE',\n            payload: message,\n        });\n    };\n\n    useEffect(() => {\n        socketRef.current.on('ROOM:SET_USERS', setUsers);\n        socketRef.current.on('ROOM:NEW_MESSAGE', addMessage);\n    }, []);\n\n\n    return (\n      <Chat userInfo={name + ' ' + surname} {...state} socketRef={socketRef} onAddMessage={addMessage} />\n    );\n}\n\nexport default App;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\n\nimport MicNoneIcon from '@material-ui/icons/MicNone';\nimport MicOffOutlinedIcon from '@material-ui/icons/MicOffOutlined';\n\nimport VideocamOutlinedIcon from '@material-ui/icons/VideocamOutlined';\nimport VideocamOffOutlinedIcon from '@material-ui/icons/VideocamOffOutlined';\n\nimport './room.sass'\n\nconst Video = (props) => {\n  const ref = useRef();\n\n  useEffect(() => {\n\n    props.peer.on(\"stream\", stream => {\n      ref.current.srcObject = stream;\n    })\n  }, []);\n\n  return (\n    <video autoPlay ref={ref} />\n  );\n}\n\n\nconst Room = (props) => {\n  const [peers, setPeers] = useState([]);\n  const socketRef = useRef();\n  const userVideo = useRef();\n  const peersRef = useRef([]);\n  const roomID = props.match.params.roomID;\n  const userStream = useRef();\n\n  const [videoParams, setVideoParams] = useState(true); // Для включения/выключения видео\n  const [microParams, setMicroParams] = useState(false); // Для включения/выключения звука\n\n  useEffect(() => {\n    socketRef.current = io.connect(process.env.REACT_APP_SERVER_URL);\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\n      .then(stream => {\n        userVideo.current.srcObject = stream;\n        userStream.current = stream;\n\n        userStream.current.getAudioTracks()[0].enabled = microParams;\n\n        socketRef.current.emit(\"join room\", roomID);\n        socketRef.current.on(\"all users\", users => {\n          const peers = [];\n          users.forEach(userID => {\n            const peer = createPeer(userID, socketRef.current.id, stream);\n            peersRef.current.push({\n              peerID: userID,\n              peer,\n            })\n            peers.push({\n              peerID: userID,\n              peer\n            });\n          })\n          setPeers(peers);\n        })\n\n        socketRef.current.on(\"user joined\", payload => {\n\n          const peer = addPeer(payload.signal, payload.callerID, stream);\n\n          console.log(peersRef.current)\n\n          peersRef.current.push({\n            peerID: payload.callerID,\n            peer,\n          })\n\n          const peerObj = {\n            peer,\n            peerID: payload.callerID\n          }\n\n          console.log(peersRef.current, peerObj, '!!!!!!!')\n\n          console.log(peerObj.peer._id, 'peer id')\n\n\n          setPeers(users => users.map(el => el.peerID !== peerObj.peerID ? {...el} : {...peerObj} ));\n          // setPeers(users => [...users, peerObj]);\n\n        });\n\n        socketRef.current.on(\"receiving returned signal\", payload => {\n          const item = peersRef.current.find(p => p.peerID === payload.id);\n          item.peer.signal(payload.signal);\n        });\n\n        socketRef.current.on('user left', id => {\n          const peerObj = peersRef.current.find(p => p.peerID === id)\n          if (peerObj) {\n            peerObj.peer.destroy()\n          }\n          const peers = peersRef.current.filter(p => p.peerID !== id)\n          peersRef.current = peers\n          setPeers(peers)\n        })\n\n      })\n\n    return () => {\n      userStream.current.getTracks().forEach(el => el.stop())\n      socketRef.current.close()\n    }\n  }, []);\n\n  useEffect(() => {\n    if (userStream.current && userStream.current.getVideoTracks()[0] && userStream.current.getVideoTracks()[0].enabled !== videoParams) {\n      userStream.current.getVideoTracks()[0].enabled = videoParams\n    }\n    if (userStream.current && userStream.current.getAudioTracks()[0] && userStream.current.getAudioTracks()[0].enabled !== microParams) {\n      userStream.current.getAudioTracks()[0].enabled = microParams\n    }\n\n  }, [videoParams, microParams])\n\n  function createPeer(userToSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", signal => {\n      socketRef.current.emit(\"sending signal\", { userToSignal, callerID, signal })\n    })\n\n    return peer;\n  }\n\n  function addPeer(incomingSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream,\n    })\n\n    peer.on(\"signal\", signal => {\n      socketRef.current.emit(\"returning signal\", { signal, callerID })\n    })\n\n    peer.signal(incomingSignal);\n\n    return peer;\n  }\n\n  console.log(peers)\n\n  return (\n    <div className=\"videochat-container\">\n      <div className=\"videochat-user\">\n        <video muted ref={userVideo} autoPlay />\n        <div className=\"videochat-user-buttons\">\n          {microParams ? <button onClick={() => setMicroParams(prev => !prev)}><MicNoneIcon /> </button> :\n            <button className='red' onClick={() => setMicroParams(prev => !prev)}><MicOffOutlinedIcon /> </button>\n          }\n\n          {videoParams ? <button onClick={() => setVideoParams(prev => !prev)}><VideocamOutlinedIcon /> </button> :\n            <button className='red' onClick={() => setVideoParams(prev => !prev)}><VideocamOffOutlinedIcon /> </button>\n          }\n        </div>\n      </div>\n      <div className=\"videochat-companions\">\n          {peers.map(peer =>  {\n            return (\n              <Video key={peer.peerID} peer={peer.peer}/>\n            )\n          })}\n      </div>\n    </div>\n  );\n};\n\nexport default Room;\n","import * as ACTIONS_TYPES from './actionTypes'\n\nconst ORG_ADD_ORG = (orgObject) => {\n  return {\n    type: ACTIONS_TYPES.ORG_ADD_ORG,\n    payload: {\n      ...orgObject\n    }\n  }\n};\n\nconst DEP_TO_ORG = (orgID, depID) => {\n  return {\n    type: ACTIONS_TYPES.DEP_TO_ORG,\n    payload: {\n      orgID,\n      depID\n    }\n  }\n};\n\n\n\n\nexport {\n  ORG_ADD_ORG,\n  DEP_TO_ORG\n} \n","import * as ACTIONS_TYPES from './actionTypes'\n\nconst DEP_ADD_DEP = (orgID, depObject) => {\n  return {\n    type: ACTIONS_TYPES.DEP_ADD_DEP,\n    payload: {\n      orgID,\n      depObject\n    }\n  }\n};\n\nconst ORG_KEY_IN_DEP = (orgID) => {\n  return {\n    type: ACTIONS_TYPES.ORG_KEY_IN_DEP,\n    payload: {\n      orgID\n    }\n  }\n};\n\nconst WORKER_TO_DEP = (orgID, depID, workerObj) => {\n  return {\n    type: ACTIONS_TYPES.WORKER_TO_DEP,\n    payload: {\n      orgID, depID, workerObj\n    }\n  }\n};\n\n\n\n\nexport {\n  DEP_ADD_DEP,\n  ORG_KEY_IN_DEP,\n  WORKER_TO_DEP\n} \n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport * as ACTION_ORG from \"../../redux/actions/orgActions\";\nimport * as ACTION_DEP from \"../../redux/actions/depActions\";\nimport { useDispatch } from 'react-redux';\n\n\nexport default function ModalOrg({ open, handleClose }) {\n  const [input, setInput] = useState('');\n\n  const dispatch = useDispatch();\n\n  const addOrg = async () => {\n    handleClose();\n\n    const { user: { userID } } = JSON.parse(localStorage.getItem('redux'));\n    console.log(userID);\n\n    try {\n      const data = {\n        nameOrg: input,\n        userID\n      }\n\n      const response = await fetch(`${process.env.REACT_APP_SERVER_URL}/organization`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      })\n      const result = await response.json();\n\n\n\n      //////\n      console.log('ПОСЛЕ ДОБАВЛЕНИЯ ОРГ', result);\n      //////\n\n\n      if (response.ok) {\n        dispatch(ACTION_ORG.ORG_ADD_ORG(result));\n        dispatch(ACTION_DEP.ORG_KEY_IN_DEP(result._id));\n      }\n\n\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n\n\n\n\n  return (\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle id=\"form-dialog-title\">Добавить организацию</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Введите название вашей организации/предприятия:\n          </DialogContentText>\n        <form>\n          <TextField\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Название\"\n            type=\"text\"\n            fullWidth\n            onChange={(e) => setInput(e.target.value)}\n            autoFocus\n          />\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Отмена\n          </Button>\n        <Button onClick={addOrg} color=\"primary\">\n          Добавить\n          </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react'\n\nconst OrganizationCard = ({ name }) => {\n  // console.log(props);\n  return (\n    <div>{name}</div>\n  )\n}\n\nexport default OrganizationCard\n","import React from 'react'\n\nexport default React.createContext()\n","import React, { useContext, useState } from 'react';\nimport ModalOrg from './ModalOrg';\nimport Button from '@material-ui/core/Button';\nimport { Link, useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport OrganizationCard from '../OrganizationCard';\nimport isCreatorContext from '../contexts/isCreatorContext';\n\nconst Profile = () => {\n\n  console.log('RENDER profile');\n  // const { id } = useParams()\n\n  const orgArray = useSelector(state => state.organizations)\n  const [open, setOpen] = React.useState(false);\n  const { isCreator } = useContext(isCreatorContext)\n\n  const depsObj = useSelector(state => state.departments)\n  const userInfo = useSelector(state => state.user)\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <>\n      {isCreator\n        ?\n        <>\n          <div className=\"profile__page\">\n            <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n              + Добавить организацию\n        </Button>\n            {open && <ModalOrg open={open} handleClose={handleClose} />}\n          </div>\n\n          <div>\n            {orgArray.length ? <ul className=\"org-list \">\n              {orgArray.map((org) => {\n                return (\n                  <Link to={`/organization/${org._id}`} key={org._id}>\n                    <li className=\"org-list-task\">\n                      <OrganizationCard {...org} />\n                    </li>\n                  </Link>\n                )\n              })}\n            </ul> : <p>Нет добавленных организаций</p>\n            }\n          </div>\n        </>\n\n        :\n\n        <>\n          {\n            Object.keys(depsObj)\n              ?\n              <>\n                <p> Уважаемый {userInfo.name + ' ' + userInfo.surname}, здесь перечислены департаменты: </p>\n                {/* ОТОБРАЖЕНИЕ ДЕПАРТМЕНТОВ С СЕРВЕРНЫХ ДАННЫХ (не из редакс!) \n              >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n              */}\n              </>\n              : <p> Уважаемый {userInfo.name + ' ' + userInfo.surname}, подождите, пока Вас добавят в список сотрудников на сайте </p>\n          }\n        </>\n      }\n    </>\n  )\n}\n\nexport default Profile;\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport HomeIcon from '@material-ui/icons/Home';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport LockIcon from '@material-ui/icons/Lock';\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport ChatIcon from '@material-ui/icons/Chat';\n\nimport './navbar.css'\nimport {Link, useHistory} from \"react-router-dom\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport * as ACTION_TASKS from \"../../redux/actions/regAndLog\";\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nexport default function MiniDrawer({children}) {\n\n  const aboutMe = useSelector(state => state.aboutMe)\n  const { userID, name, surname } = useSelector(state => state.user)\n  const dispatch = useDispatch()\n\n\n  const handleQuit = () => {\n    dispatch(ACTION_TASKS.LOGOUT())\n    dispatch(ACTION_TASKS.IS_NOT_ME())\n    localStorage.clear()\n  }\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, {\n              [classes.hide]: open,\n            })}\n          >\n            <MenuIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        variant=\"permanent\"\n        className={clsx(classes.drawer, {\n          [classes.drawerOpen]: open,\n          [classes.drawerClose]: !open,\n        })}\n        classes={{\n          paper: clsx({\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          }),\n        }}\n      >\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <div className=\"menu-items\">\n          <List>\n            <Link to={'/'} className=\"nav-link\">\n              <ListItem button>\n                <ListItemIcon><HomeIcon /></ListItemIcon>\n                <ListItemText>\n                  Главная\n                </ListItemText>\n              </ListItem>\n            </Link>\n            {aboutMe.isMe ?\n              <>\n                <Link to=\"/videochat\" className=\"nav-link\">\n                  <ListItem button>\n                    <ListItemIcon><VideocamIcon /></ListItemIcon>\n                    <ListItemText>\n                      Видео\n                    </ListItemText>\n                  </ListItem>\n                </Link>\n                <Link to=\"/global-chat\" className=\"nav-link\">\n                  <ListItem button>\n                    <ListItemIcon><ChatIcon /></ListItemIcon>\n                    <ListItemText>\n                      Чат\n                    </ListItemText>\n                  </ListItem>\n                </Link>\n              </>\n              : ''}\n\n          </List>\n\n          <Divider />\n          <List>\n            {aboutMe.isMe ?\n              <>\n                <Link to={`/profile/${userID}`} className=\"nav-link\">\n                  <ListItem button>\n                    <ListItemIcon><AccountCircleIcon /></ListItemIcon>\n                    <ListItemText>\n                      Личный кабинет\n                    </ListItemText>\n                  </ListItem>\n                </Link>\n                <Link to=\"/user/registration\" className=\"nav-link\" onClick={handleQuit}>\n                  <ListItem button>\n                    <ListItemIcon><MeetingRoomIcon /></ListItemIcon>\n                    <ListItemText>\n                      Выйти\n                    </ListItemText>\n                  </ListItem>\n                </Link>\n              </> :\n              <>\n                <Link className=\"nav-link\" to=\"/user/registration\">\n                  <ListItem button>\n                    <ListItemIcon>< VpnKeyIcon /></ListItemIcon>\n                    <ListItemText>\n                      Регистрация\n                    </ListItemText>\n                  </ListItem>\n                </Link>\n                <Link className=\"nav-link\" to=\"/user/login\">\n                  <ListItem button>\n                    <ListItemIcon><LockIcon /></ListItemIcon>\n                    <ListItemText>\n                      Войти\n                    </ListItemText>\n                  </ListItem>\n                </Link>\n              </>\n            }\n\n\n          </List>\n        </div>\n\n\n      </Drawer>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {children}\n      </main>\n    </div>\n  );\n}\n","import * as ACTIONS_TYPES from './actionTypes'\n\nconst MAIN_IS_CREATOR = (isCreator) => {\n  return {\n    type: ACTIONS_TYPES.MAIN_IS_CREATOR,\n    payload: {\n      isCreator\n    }\n  }\n};\n\nconst MAIN_USER = (userInfo) => {\n  return {\n    type: ACTIONS_TYPES.MAIN_USER,\n    payload: userInfo\n  }\n};\n\nconst MAIN_DEPARTMENTS = (orgID, departments) => {\n  return {\n    type: ACTIONS_TYPES.MAIN_DEPARTMENTS,\n    payload: {\n      orgID, departments\n    }\n  }\n};\n\n// organization - ЭТО МАССИВ\nconst MAIN_ORGANIZATIONS = (organization) => {\n  return {\n    type: ACTIONS_TYPES.MAIN_ORGANIZATIONS,\n    payload: {\n      organization\n    }\n  }\n};\n\n\n\n\nexport {\n  MAIN_IS_CREATOR,\n  MAIN_USER,\n  MAIN_DEPARTMENTS,\n  MAIN_ORGANIZATIONS,\n} \n","import React, { useContext, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as ACTION_MAIN_PAGE from \"../../redux/actions/mainPageActions\";\nimport isCreatorContext from '../contexts/isCreatorContext';\n\n\nconst MainPage = () => {\n\n  const dispatch = useDispatch()\n  const { userID } = useSelector(state => state.user)\n  const { isCreator } = useContext(isCreatorContext)\n\n  const [dep, setDep] = useState([])\n  const [orgName, setOrgName] = useState('')\n  const [userInfo, setUserInfo] = useState({})\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_SERVER_URL}/organization/?userID=${userID}`)\n        const result = await response.json()\n        console.log('INFO_FOR_MAIN_PAGE', result);\n        //dispatch(FROM_BACKEND(result))\n\n\n        if (response.ok) {\n          // НУЖНА ЛОГИКА \n\n          const { departments, organization, isCreator, ...userInfo } = result;\n          console.log(userInfo);\n\n\n          if (departments.length) {\n            const { orgID, name: orgName } = departments[0].organization\n            dispatch(ACTION_MAIN_PAGE.MAIN_DEPARTMENTS(orgID, departments))\n\n            setDep(departments);\n            setOrgName(orgName)\n          }\n          setUserInfo(userInfo)\n          dispatch(ACTION_MAIN_PAGE.MAIN_IS_CREATOR(isCreator))\n          dispatch(ACTION_MAIN_PAGE.MAIN_USER(userInfo))\n          dispatch(ACTION_MAIN_PAGE.MAIN_ORGANIZATIONS(organization))\n        }\n\n\n      } catch (err) {\n        // логику с setMessageBack как в ModalWorker COMPONENT\n        console.log(err);\n      }\n    })();\n  }, [])\n\n\n  return (\n    <>\n      <h1>Главная страница</h1>\n\n      {isCreator\n        ?\n        <>\n          <p>Ваши организации:</p>\n          <div>\n            {/* ОТОБРАЖЕНИЕ ОРГАНИЗАЦИЙ/ДЕПАРТАМЕНТОВ С СЕРВЕРНЫХ ДАННЫХ (не из редакс!) \n                >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n                */}\n            {/* {arrTask.length ? <ul className=\"todo-list list-group\">\n          {arrTask.map((task) => {\n            return (\n              <li key={task.id} className=\"todo-list-task list-group-item\">\n                <Organization {...task} />\n              </li>\n\n            )\n          })}\n        </ul> : <p>Нет добавленных организаций</p>\n        } */}\n          </div>\n        </>\n\n        :\n\n        <>\n          {\n            dep.length\n              ?\n              <>\n                <p> Уважаемый {userInfo.name + ' ' + userInfo.surname}, Вы являетесь сотрудником организации: {orgName}</p>\n                {/* ОТОБРАЖЕНИЕ ДЕПАРТМЕНТОВ С СЕРВЕРНЫХ ДАННЫХ (не из редакс!) \n                >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\n                */}\n              </>\n              : <p> Уважаемый {userInfo.name + ' ' + userInfo.surname}, подождите, пока Вас добавят в список сотрудников на сайте </p>\n          }\n        </>\n      }\n    </>\n  )\n}\n\nexport default MainPage\n","import React from 'react'\n\nconst DepartmentCard = ({ name }) => {\n  // console.log(props);\n  return (\n    <div>{name}</div>\n  )\n}\n\nexport default DepartmentCard\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport * as ACTION_DEP from \"../../redux/actions/depActions\";\nimport * as ACTION_ORG from \"../../redux/actions/orgActions\";\nimport { useDispatch } from 'react-redux';\n\n\nexport default function ModalDepart({ open, handleClose, orgID }) {\n  const [input, setInput] = useState('');\n\n  const dispatch = useDispatch();\n\n  const addOrg = async () => {\n    handleClose();\n\n    const { user: { userID } } = JSON.parse(localStorage.getItem('redux'));\n    console.log(userID);\n\n    try {\n      const data = {\n        nameDepart: input,\n        userID,\n        orgID: orgID\n      }\n\n      const response = await fetch(`${process.env.REACT_APP_SERVER_URL}/department`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      })\n      const result = await response.json();\n\n\n\n      //////\n      console.log('ПОСЛЕ ДОБАВЛЕНИЯ ДЕПАРТМЕНТА', result);\n      //////\n\n\n      if (response.ok) {\n        dispatch(ACTION_DEP.DEP_ADD_DEP(orgID, result));\n        dispatch(ACTION_ORG.DEP_TO_ORG(orgID, result._id));\n      }\n\n\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n\n\n\n\n  return (\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle id=\"form-dialog-title\">Добавить отдел</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Введите название отдела/подразделения:\n          </DialogContentText>\n        <form>\n          <TextField\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Название\"\n            type=\"text\"\n            fullWidth\n            onChange={(e) => setInput(e.target.value)}\n            autoFocus\n          />\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Отмена\n          </Button>\n        <Button onClick={addOrg} color=\"primary\">\n          Добавить\n          </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { Button } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux';\nimport { Link, useHistory, useParams } from 'react-router-dom'\nimport DepartmentCard from '../DepartmentCard';\nimport ModalDepart from './ModalDepart';\n\nconst OrganizationInfo = ({ organizations }) => {\n  console.log('RENDER OrgINFO');\n\n  console.log(organizations);\n  const { id } = useParams()\n  const [org, setOrg] = useState({})\n  const history = useHistory()\n  const [open, setOpen] = React.useState(false);\n\n  const depArray = useSelector(state => state.departments[id]) || []\n  console.log('depArray', depArray);\n\n  useEffect(() => {\n\n    const findOrg = organizations.find(el => el._id === id)\n    console.log('FFFFFFFFFF', findOrg);\n    if (findOrg) {\n      setOrg({ ...findOrg })\n    }\n\n  }, [])\n\n  const backHandler = () => {\n    history.goBack()\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <div>Страница организации</div>\n      { Object.keys(org).length ?\n        <div className=\"d-flex flex-column align-items-center\">\n          <h1>\n            {org.name}\n          </h1>\n          <p>Добавьте отделы/подразделения вашей компании </p>\n\n\n          <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n            + Добавить отдел\n          </Button>\n          {open && <ModalDepart open={open} handleClose={handleClose} orgID={org._id} />}\n\n          <div>\n            {depArray.length ? <ul className=\"dep-list \">\n              {depArray.map((dep) => {\n                console.log('>>>>>>>>>>', dep);\n                return (\n                  <Link to={`/department/${dep._id}`} key={dep._id}>\n                    <li className=\"dep-list-task\">\n                      <DepartmentCard {...dep} />\n                    </li>\n                  </Link>\n                )\n              })}\n            </ul> : <p>Нет добавленных отделов</p>\n            }\n          </div>\n\n\n          <button onClick={backHandler} type=\"button\" className=\"btn btn-primary mt-5\">Back</button>\n\n        </div>\n        : null}\n\n    </>\n  )\n}\n\nexport default OrganizationInfo\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport * as ACTION_DEP from \"../../redux/actions/depActions\";\nimport * as ACTION_ORG from \"../../redux/actions/orgActions\";\nimport { useDispatch } from 'react-redux';\n\n\nexport default function ModalWorker({ handleClose, _id: depID, open, orgID, setAddWorker, setMesFromBack }) {\n\n  console.log(depID)\n\n  const [input, setInput] = useState('');\n\n  const dispatch = useDispatch();\n\n  const addWorker = async () => {\n    handleClose();\n    try {\n      const data = {\n        workerEmail: input,\n      }\n\n      const response = await fetch(`${process.env.REACT_APP_SERVER_URL}/department/${depID}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      })\n      const result = await response.json();\n\n\n\n      //////\n      console.log('ПОСЛЕ ДОБАВЛЕНИЯ WORKER-a', result);\n      //////\n\n\n      if (response.ok) {\n        // НУЖНА ЛОГИКА \n        dispatch(ACTION_DEP.WORKER_TO_DEP(orgID, depID, result));\n        // dispatch(ACTION_ORG.DEP_TO_ORG(depID, result._id));\n\n        return setAddWorker(result)\n      }\n      return setMesFromBack(result.message)\n\n\n    } catch (err) {\n      setMesFromBack(err.message)\n      console.log(err);\n    }\n  }\n\n\n\n\n\n  return (\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle id=\"form-dialog-title\">Добавьте email сотрудника</DialogTitle>\n      <DialogContent>\n        <form>\n          <TextField\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Email\"\n            type=\"text\"\n            fullWidth\n            onChange={(e) => setInput(e.target.value)}\n            autoFocus\n          />\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Отмена\n          </Button>\n        <Button onClick={addWorker} color=\"primary\">\n          Добавить\n          </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import * as ACTIONS_TYPES from './actionTypes'\n\nconst DEP_ACTUAL = (depObject) => {\n  console.log(depObject, 'depObject');\n  return {\n    type: ACTIONS_TYPES.DEP_ACTUAL,\n    payload: depObject\n  }\n};\n\n\n\n\n\n\nexport {\n  DEP_ACTUAL\n} \n","import React, { useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom'\n\n\nconst WorkerInfo = () => {\n  console.log('RENDER WorkerInfo');\n\n  const { id } = useParams()\n  console.log(id, 'WorkerInfo');\n  const [worker, setWorker] = useState({})\n  const history = useHistory()\n\n  const workers = useSelector(state => state.department.workers)\n\n  console.log('WorkerInfo_________workersArr', workers);\n\n\n\n  useEffect(() => {\n    console.log('THIS WORKER', id);\n    const thisWorker = workers.find(worker => worker._id === id)\n    console.log('THIS WORKER', thisWorker);\n    setWorker(thisWorker);\n  }, [])\n\n\n\n\n\n  const backHandler = () => {\n    history.goBack()\n  }\n\n\n\n\n  return (\n    <>\n      <div>Страница отдела</div>\n      { Object.keys(worker).length\n        ?\n        <div className=\"d-flex flex-column align-items-center\">\n          <h1>\n            {worker.name + ' ' + worker.surname}\n          </h1>\n          <p>Email: {worker.email}</p>\n\n          <button onClick={backHandler} type=\"button\" className=\"btn btn-primary mt-5\">Back</button>\n\n        </div>\n        : null}\n\n    </>\n  )\n}\n\nexport default WorkerInfo\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport WorkerInfo from '../WorkerInfo';\n\n\nconst WorkersList = ({ workersArr = [] }) => {\n\n  console.log('WorkersList_workersArr', workersArr);\n  return (\n    <>\n      <br />\n      <hr />\n      {workersArr.length\n        ?\n        <ul className=\"worker-list list-group\">\n          {workersArr.map((worker) => {\n            console.log('РаботникID', worker._id);\n            return (\n              <Link to={`/worker/${worker._id}`} key={worker._id}>\n                <li className=\"worker-list-task list-group-item\">\n                  {worker.name + ' ' + worker.surname}\n                </li>\n              </Link>\n            )\n          })}\n        </ul>\n        :\n        <p>Нет добавленных сотрудников</p>\n\n      }\n\n    </>\n  )\n}\n\nexport default WorkersList\n","import { Button } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useHistory, useParams } from 'react-router-dom'\nimport ModalWorker from \"./ModalWorker\";\nimport * as ACTION_DEP_ACTUAL from \"../../redux/actions/depActualActions\";\n\nimport WorkersList from '../WorkersList';\n\n// ЧЕКНУТЬ ВСЁ\nconst DepartmentInfo = ({ organizations }) => {\n  console.log('RENDER DepartmentInfo');\n\n  const { id } = useParams()\n  const dispatch = useDispatch()\n\n  const [dep, setDep] = useState({})\n\n  const [addWorker, setAddWorker] = useState({})\n\n  const [orgID, setOrgID] = useState('')\n  const history = useHistory()\n  const [open, setOpen] = useState(false);\n  const [mesFromBack, setMesFromBack] = useState('');\n\n\n  const departments = useSelector(state => state.departments)\n\n  const workersArr = useSelector(state => state.department.workers)\n  console.log('workersArr', workersArr);\n\n\n\n  useEffect(() => {\n\n    const { _id: orgID } = organizations.find(el => el.departments.find(element => element === id));\n    if (orgID) {\n      const foundDep = departments[orgID].find(el => el._id = id)\n      setDep(foundDep);\n      setOrgID(orgID)\n      dispatch(ACTION_DEP_ACTUAL.DEP_ACTUAL(foundDep));\n    };\n  }, [addWorker])\n\n  const backHandler = () => {\n    history.goBack()\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n\n  return (\n    <>\n      <div>Страница отдела</div>\n      { Object.keys(dep).length ?\n        <div className=\"d-flex flex-column align-items-center\">\n          <h1>\n            {dep.name}\n          </h1>\n          <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n            + Добавить сотрудника\n          </Button>\n          {mesFromBack &&\n            <span style={{ color: \"red\", fontSize: \"small\" }}>{' ' + mesFromBack}</span>}\n\n          {open && <ModalWorker open={open} handleClose={handleClose} {...dep} orgID={orgID} setAddWorker={setAddWorker} setMesFromBack={setMesFromBack} />}\n\n          <div>\n            <WorkersList workersArr={workersArr} mesFromBack={mesFromBack} />\n          </div>\n\n          <button onClick={backHandler} type=\"button\" className=\"btn btn-primary mt-5\">Back</button>\n\n        </div>\n        : null}\n\n    </>\n  )\n}\n\nexport default DepartmentInfo\n","import React, { useEffect } from 'react';\nimport './App.css';\nimport RegistrationPage from './components/RegistrationPage';\nimport LoginPage from './components/LoginPage/LoginPage';\nimport PrivateRoute from './components/Private/Private';\n\n\nimport { Route, Switch, Redirect } from 'react-router-dom'\nimport SignIn from \"./components/SignIn\";\nimport Room from \"./components/Room/Room\";\n\nimport { useSelector } from 'react-redux';\nimport Profile from './components/Profile';\nimport LeftMenu from './components/Navbar/Navbar';\nimport MainPage from './components/MainPage'\nimport OrganizationInfo from './components/OrganizationInfo';\nimport DepartmentInfo from \"./components/DepartmentInfo\";\nimport WorkerInfo from './components/WorkerInfo'\nimport IsCreatorContext from './components/contexts/isCreatorContext'\n\nfunction App() {\n\n  const aboutMe = useSelector(state => state.aboutMe);\n  const user = useSelector(state => state.user)\n  const organizations = useSelector(state => state.organizations)\n\n\n\n  console.log(aboutMe.isCreator, 'ISCREATOR');\n\n  return (\n    <div className=\"App\">\n\n      <IsCreatorContext.Provider value={aboutMe.isCreator}>\n\n        <LeftMenu >\n\n          <Switch>\n\n\n            <Route exact path=\"/user/registration\">\n              <RegistrationPage />\n            </Route>\n\n            <Route exact path=\"/user/login\">\n              <LoginPage />\n            </Route>\n\n\n            <Route exact path=\"/organization/:id\">\n              <OrganizationInfo organizations={organizations} />\n            </Route>\n\n            <Route exact path=\"/worker/:id\">\n              <WorkerInfo organizations={organizations} />\n            </Route>\n\n            <Route exact path=\"/department/:id\">\n              <DepartmentInfo organizations={organizations} />\n            </Route>\n\n\n            <Route exact path='/videochat' component={Room} />\n\n\n            <PrivateRoute exact path={`/profile/:id`}>\n              <Profile />\n            </PrivateRoute>\n\n            <Route exact path=\"/\">\n              {aboutMe.isMe ? <MainPage /> : <Redirect to=\"/user/registration\" />}\n            </Route>\n\n            <Route exact path='/global-chat'>\n              <SignIn />\n            </Route>\n\n          </Switch>\n        </LeftMenu>\n\n\n      </IsCreatorContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const initialState = () => {\n  const initialValue = {\n    aboutMe: {\n      isMe: false,\n      isCreator: false\n    },\n\n    user: {},\n\n    organizations: [],\n\n    departments: {},\n\n    department: {}\n  }\n\n  return JSON.parse(localStorage.getItem('redux')) || initialValue\n\n}\n\n/*  const initialValue = {\n      aboutMe: {\n        isMe: true/false\n      },\n\n     user: {\n      name: 'dfd'\n      surname\n      email\n      id\n     },\n\n    contactsForChat: [\n      {\n        id: 'a',\n        surname:\n        name:\n\n    },\n      {},\n\n    ]\n// }\n*/\n\n\nexport default initialState\n\n\n","import * as ACTION_TYPES from \"../actions/actionTypes\";\n\nconst userReducer = (state = {}, action) => {\n  switch (action.type) {\n    // case ACTION_TYPES.REGISTRATION:\n    case ACTION_TYPES.MAIN_USER:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case ACTION_TYPES.LOGIN:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case ACTION_TYPES.LOGOUT:\n      return {}\n\n    default:\n      return state\n  }\n}\n\nexport default userReducer\n","import * as ACTION_TYPES from \"../actions/actionTypes\";\n\n\nconst aboutMeReducer = (state = {}, action) => {\n  switch (action.type) {\n    case ACTION_TYPES.IS_ME:\n      return {\n        ...state,\n        isMe: true,\n      }\n\n    case ACTION_TYPES.IS_NOT_ME:\n      return {\n        ...state,\n        isMe: false,\n      }\n\n    case ACTION_TYPES.MAIN_IS_CREATOR:\n      return {\n        ...state,\n        isCreator: action.payload.isCreator\n      }\n\n    default:\n      return state\n  }\n}\n\nexport default aboutMeReducer\n","import * as ACTION_TYPES from \"../actions/actionTypes\";\n\n\nconst orgReducer = (state = [], action) => {\n  switch (action.type) {\n    case ACTION_TYPES.ORG_ADD_ORG:\n      return [\n        ...state,\n        { ...action.payload },\n      ]\n\n\n    case ACTION_TYPES.DEP_TO_ORG:\n      return state.map(el => {\n        if (el._id === action.payload.orgID) return {\n          ...el,\n          departments: [\n            ...el.departments, action.payload.depID\n          ]\n        }\n        return el;\n      })\n\n    // organization - ЭТО МАССИВ\n    case ACTION_TYPES.MAIN_ORGANIZATIONS:\n      return [\n        ...action.payload.organization,\n      ]\n\n\n    default:\n      return state\n  }\n}\n\nexport default orgReducer\n","import * as ACTION_TYPES from \"../actions/actionTypes\";\n\n\nconst depReducer = (state = {}, action) => {\n  switch (action.type) {\n    case ACTION_TYPES.DEP_ADD_DEP:\n      return {\n        ...state,\n        [action.payload.orgID]: [\n          ...state[action.payload.orgID],\n          action.payload.depObject\n        ]\n      }\n\n    case ACTION_TYPES.ORG_KEY_IN_DEP:\n      return {\n        ...state,\n        [action.payload.orgID]: []\n      }\n\n\n    case ACTION_TYPES.WORKER_TO_DEP:\n\n      return {\n        ...state,\n        [action.payload.orgID]: state[action.payload.orgID].map((dep) => {\n          if (dep._id === action.payload.depID) return {\n            ...dep,\n            workers: [\n              ...dep.workers, action.payload.workerObj\n            ]\n          }\n          return dep;\n        })\n      }\n\n    case ACTION_TYPES.MAIN_DEPARTMENTS:\n\n      return {\n        ...state,\n        [action.payload.orgID]: [\n          ...action.payload.departments\n        ]\n      }\n\n\n    default:\n      return state\n  }\n}\n\nexport default depReducer\n","import * as ACTION_TYPES from \"../actions/actionTypes\";\n\n\nconst actualDepReducer = (state = {}, action) => {\n  switch (action.type) {\n    case ACTION_TYPES.DEP_ACTUAL:\n      return {\n        ...action.payload\n      }\n\n    default:\n      return state\n  }\n}\n\nexport default actualDepReducer\n","import { combineReducers } from 'redux'\nimport usersReducer from \"./usersReducer\";\nimport aboutMeReducer from \"./aboutMeReducer\";\nimport orgReducer from './orgReducer'\nimport depReducer from './depReducer'\nimport actualDepReducer from './actualDepReducer'\n\nexport default combineReducers({\n  user: usersReducer,\n  aboutMe: aboutMeReducer,\n  organizations: orgReducer,\n  departments: depReducer,\n  department: actualDepReducer\n})\n","import { createStore } from \"redux\";\nimport initialState from \"./initialState\"\nimport rootReducer from \"./reducers/rootReducer\";\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\n\nconst enhancer = composeWithDevTools()\n// const enhancer = composeWithDevTools(applyMiddleware(thunk))\n\nconst store = createStore(rootReducer, initialState(), enhancer)\n\n\nstore.subscribe(() => {\n  localStorage.setItem('redux', JSON.stringify(store.getState()))\n})\n\nexport default store\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport store from './redux/store'\n\nimport { BrowserRouter as Router } from 'react-router-dom';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}